<head>
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/base.css">
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/display.css">
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/tables.css">
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/navigation.css">
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/features.css">
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/reasons.css">
    <link rel="stylesheet" type="text/css" media="screen" href="refactorcss/arrows.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    
    <script src="scripts/parsed_query_display.js"></script>
    <script src="scripts/table_display.js"></script>
    <script src="scripts/resize.js"></script>
    <script src="scripts/collapse.js"></script>
    <script src="scripts/navigation.js"></script>
    <script src="scripts/reasons.js"></script>
    <script src="scripts/lines.js"></script>
    <script src="scripts/testcases/globaltables.js"></script>
<script>var pq = ['{"query_text": "select * from Took, (select * from Student) as S;", "tables": {"S": "{\\"step\\": \\"1.3\\", \\"col_names\\": [\\"sid\\", \\"firstname\\", \\"email\\", \\"cgpa\\"], \\"reasons\\": [], \\"t_name\\": \\"S\\", \\"tuples\\": [[\\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"]]}", "1.2": "{\\"step\\": \\"1.2\\", \\"col_names\\": [\\"sid\\", \\"firstname\\", \\"email\\", \\"cgpa\\"], \\"reasons\\": [], \\"t_name\\": \\"Student\\", \\"tuples\\": [[\\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"]]}", "Took": "{\\"step\\": \\"1.1\\", \\"col_names\\": [\\"sid\\", \\"oid\\", \\"grade\\"], \\"reasons\\": [], \\"t_name\\": \\"Took\\", \\"tuples\\": [[\\"1\\", \\"2\\", \\"87\\"], [\\"1\\", \\"4\\", \\"73\\"], [\\"2\\", \\"2\\", \\"92\\"], [\\"3\\", \\"1\\", \\"80\\"], [\\"4\\", \\"1\\", \\"60\\"]]}", "2": "{\\"step\\": \\"2\\", \\"col_names\\": [\\"Took.sid\\", \\"oid\\", \\"grade\\", \\"S.sid\\", \\"firstname\\", \\"email\\", \\"cgpa\\"], \\"reasons\\": [], \\"t_name\\": \\"Took, S\\", \\"tuples\\": [[\\"1\\", \\"2\\", \\"87\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"1\\", \\"2\\", \\"87\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"1\\", \\"2\\", \\"87\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"1\\", \\"2\\", \\"87\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"1\\", \\"4\\", \\"73\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"1\\", \\"4\\", \\"73\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"1\\", \\"4\\", \\"73\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"1\\", \\"4\\", \\"73\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"2\\", \\"2\\", \\"92\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"2\\", \\"2\\", \\"92\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"2\\", \\"2\\", \\"92\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"2\\", \\"2\\", \\"92\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"3\\", \\"1\\", \\"80\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"3\\", \\"1\\", \\"80\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"3\\", \\"1\\", \\"80\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"3\\", \\"1\\", \\"80\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"4\\", \\"1\\", \\"60\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"4\\", \\"1\\", \\"60\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"4\\", \\"1\\", \\"60\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"4\\", \\"1\\", \\"60\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"]]}", "1": "{\\"step\\": \\"1\\", \\"col_names\\": [\\"Took.sid\\", \\"oid\\", \\"grade\\", \\"S.sid\\", \\"firstname\\", \\"email\\", \\"cgpa\\"], \\"reasons\\": [], \\"t_name\\": \\"Took, S\\", \\"tuples\\": [[\\"1\\", \\"2\\", \\"87\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"1\\", \\"2\\", \\"87\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"1\\", \\"2\\", \\"87\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"1\\", \\"2\\", \\"87\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"1\\", \\"4\\", \\"73\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"1\\", \\"4\\", \\"73\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"1\\", \\"4\\", \\"73\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"1\\", \\"4\\", \\"73\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"2\\", \\"2\\", \\"92\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"2\\", \\"2\\", \\"92\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"2\\", \\"2\\", \\"92\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"2\\", \\"2\\", \\"92\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"3\\", \\"1\\", \\"80\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"3\\", \\"1\\", \\"80\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"3\\", \\"1\\", \\"80\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"3\\", \\"1\\", \\"80\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"], [\\"4\\", \\"1\\", \\"60\\", \\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"4\\", \\"1\\", \\"60\\", \\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"4\\", \\"1\\", \\"60\\", \\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"4\\", \\"1\\", \\"60\\", \\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"]]}", "1.2.2": "{\\"step\\": \\"1.2.2\\", \\"col_names\\": [\\"sid\\", \\"firstname\\", \\"email\\", \\"cgpa\\"], \\"reasons\\": [], \\"t_name\\": \\"Student\\", \\"tuples\\": [[\\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"]]}", "Student": "{\\"step\\": \\"1.2.1\\", \\"col_names\\": [\\"sid\\", \\"firstname\\", \\"email\\", \\"cgpa\\"], \\"reasons\\": [], \\"t_name\\": \\"Student\\", \\"tuples\\": [[\\"1\\", \\"Martin\\", \\"martin@mail.com\\", \\"3.4\\"], [\\"2\\", \\"Kathy\\", \\"kathy@mail.com\\", \\"4.0\\"], [\\"3\\", \\"Sophia\\", \\"sophia@mail.com\\", \\"1.7\\"], [\\"4\\", \\"James\\", \\"james@mail.com\\", \\"2.8\\"]]}"}, "base_tables": {"Course": ["dept", "cNum", "name"], "Student": ["sid", "firstName", "email", "cgpa"], "Took": ["sid", "oid", "grade"], "Offering": ["oid", "dept", "cNum", "instructor"]}, "steps": ["{\\"executable_sql\\": \\"SELECT *  FROM Took , ( SELECT * FROM Student) AS S;\\", \\"result_table\\": \\"1\\", \\"namespace\\": [[\\"Took\\", [\\"sid\\", \\"oid\\", \\"grade\\"]], [\\"S\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]]], \\"sql_chunk\\": \\" FROM Took , ( SELECT * FROM Student) AS S\\", \\"step_number\\": \\"1\\", \\"input_tables\\": []}", "{\\"executable_sql\\": \\"SELECT * FROM  Took;\\", \\"result_table\\": \\"Took\\", \\"namespace\\": [[\\"Took\\", [\\"sid\\", \\"oid\\", \\"grade\\"]]], \\"sql_chunk\\": \\" Took\\", \\"step_number\\": \\"1.1\\", \\"input_tables\\": []}", "{\\"executable_sql\\": \\" SELECT * FROM Student;\\", \\"result_table\\": \\"1.2\\", \\"namespace\\": [[\\"Student\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]]], \\"sql_chunk\\": \\" SELECT * FROM Student\\", \\"step_number\\": \\"1.2\\", \\"input_tables\\": []}", "{\\"executable_sql\\": \\"SELECT *  FROM Student;\\", \\"result_table\\": \\"Student\\", \\"namespace\\": [[\\"Student\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]]], \\"sql_chunk\\": \\" FROM Student\\", \\"step_number\\": \\"1.2.1\\", \\"input_tables\\": []}", "{\\"executable_sql\\": \\"SELECT *  FROM Student;\\", \\"result_table\\": \\"1.2.2\\", \\"namespace\\": [[\\"Student\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]]], \\"sql_chunk\\": \\"SELECT *\\", \\"step_number\\": \\"1.2.2\\", \\"input_tables\\": [\\"Student\\"]}", "{\\"executable_sql\\": \\"SELECT * FROM (SELECT *  FROM Student) AS S;\\", \\"result_table\\": \\"S\\", \\"namespace\\": [[\\"S\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]]], \\"sql_chunk\\": \\"AS S\\", \\"step_number\\": \\"1.3\\", \\"input_tables\\": [\\"1.2.2\\"]}", "{\\"executable_sql\\": \\"SELECT * FROM  Took , ( SELECT * FROM Student) AS S;\\", \\"result_table\\": \\"1\\", \\"namespace\\": [[\\"S\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]], [\\"Took\\", [\\"sid\\", \\"oid\\", \\"grade\\"]]], \\"sql_chunk\\": \\" Took , ( SELECT * FROM Student) AS S\\", \\"step_number\\": \\"1.4\\", \\"input_tables\\": [\\"S\\", \\"Took\\"]}", "{\\"executable_sql\\": \\"SELECT * FROM  Took , ( SELECT * FROM Student) AS S;\\", \\"result_table\\": \\"2\\", \\"namespace\\": [[\\"Took\\", [\\"sid\\", \\"oid\\", \\"grade\\"]], [\\"S\\", [\\"sid\\", \\"firstName\\", \\"email\\", \\"cgpa\\"]]], \\"sql_chunk\\": \\"SELECT *\\", \\"step_number\\": \\"2\\", \\"input_tables\\": [\\"1\\"]}"]}'];</script>    
    <script src="scripts/window.js"></script>
    <script src="scripts/query.js"></script>
    <script src="scripts/step.js"></script>
    <script src="scripts/table.js"></script>
    
    <script src="scripts/loader.js"></script>
</head>
<body>
    <!-- Set up basic template -->
    <div id="bodybag">
        <!-- Table of Content -->
        <div id="leftbar" class="leftbar">
            <div id="toc" class="toc">
                <table id="steps" class="steps">
                </table>
            </div>
            <div id="navbar" class="navbar">
                <div id="stepout" class="navigation stepout"><img src="icons/out.png"><br>Step Out</div>
                <div id="back" class="navigation back"><img src="icons/back.png"><br>Back</div>
                <div id="next" class="navigation next"><img src="icons/next.png"><br>Next</div>
                <div id="stepin" class="navigation stepin"><img src="icons/in.png"><br>Step In</div>
                <div class="collapse-controllers"><div class="expandall" onClick="expandAll()">Expand All</div> | <div class="collapseall" onClick="collapseAll()">Collapse All</div></div>
            </div>
        </div>
        <!-- Display -->
        <div id="workspace" class="workspace">
            <div id="tablespace" class="tablespace">
                <!-- Input -->
                <div id="inbox" class="inbox">
                </div>
                <!-- Output -->
                <div id="outbox" class="outbox">
                </div>
            </div>
            <!-- Hovered Name -->
            <div id="namebox" class="namebox"></div>
            <div id="tablefooter" class="tablefooter">
                <!-- Toggle-able Temporary Tables -->
                <div id="inventory" class="inventory">
                    <div id="inventoryheader" onClick="toggleInventory()" class="inventoryheader" title="The schema of the query. All possible tables and views that can be called during the query.">Tables and Views</div>
                    <div id="inventoryspace" class="inventoryspace">
                    </div>
                </div>
                <div id="namespace" class="namespace">
                    <div id="namespaceheader" class="namespaceheader" title="The set of table names and their attributes which can be called at this point in a query.">Namespace</div>
                    <div id="namespacebody" class="namespacebody"></div>
                </div>
            </div>
        </div>
        <div id="canvas" class='canvas'></div>
    </div>
    <div id="tooltip"></div>
</body>
